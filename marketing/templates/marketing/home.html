{% extends "base.html" %}
{% load static marketing_icons %}

{% block title %}{{ meta.title }}{% endblock %}
{% block meta_description %}{{ meta.description }}{% endblock %}

{% block content %}
<!-- Hero Section -->
<div class="relative bg-todde-dark-bg text-white min-h-screen flex items-center">
  <!-- Background Image with Overlay -->
  <div class="absolute inset-0 z-0">
    <img src="https://images.unsplash.com/photo-1542282088-72c9c27ed0cd?q=80&w=2070&auto=format&fit=crop" alt="Hero Background" class="h-full w-full object-cover" />
    <div class="absolute inset-0 bg-black/5"></div>
  </div>

  <div class="container relative z-10 py-20 lg:py-32">
    <div class="grid gap-12 lg:grid-cols-2 lg:items-center">
      <!-- Hero Text -->
      <div class="space-y-8">
        <p class="text-xs font-semibold uppercase tracking-widest text-gray-400">New in stock</p>
        <h1 class="text-5xl font-bold leading-tight md:text-6xl">
          Upgrade Your<br />Driving Experience
        </h1>
        <div class="flex flex-wrap gap-4">
          <a href="{% url "marketing:all_cars" %}" class="inline-block bg-white px-8 py-3 text-sm font-semibold text-black transition hover:bg-gray-200">
            Discover More
          </a>
          <a href="#" class="inline-block border border-white px-8 py-3 text-sm font-semibold text-white transition hover:bg-white hover:text-black">
            Meet Horizon GT
          </a>
        </div>
      </div>

      <!-- Search Form -->
      <div class="ml-auto w-full max-w-lg rounded-sm bg-black/50 p-10 border border-white/50">
        <h2 class="mb-6 text-2xl font-bold text-white italic">Find Your Ride</h2>
        <form
          id="car-filter-form"
          class="space-y-5"
          data-models-url="{% url "marketing:api_car_models" %}"
          data-variants-url="{% url "marketing:api_car_variants" %}"
        >
          <div>
            <label for="car-manufacturer" class="mb-2 block text-xs font-bold uppercase tracking-wider text-gray-400">Brand</label>
            <select
              id="car-manufacturer"
              name="manufacturer"
              class="w-full rounded-none border border-white/50 bg-transparent px-4 py-3 text-white placeholder-gray-500 focus:border-todde-red focus:ring-0 text-base"
              data-role="car-manufacturer"
            >
              <option value="" class="text-black">Brand*</option>
              {% for manufacturer in car_manufacturers %}
                <option value="{{ manufacturer.id }}" class="text-black">{{ manufacturer.name }}</option>
              {% endfor %}
            </select>
          </div>

          <div>
            <label for="car-model" class="mb-2 block text-xs font-bold uppercase tracking-wider text-gray-400">Model</label>
            <select
              id="car-model"
              name="model"
              class="w-full rounded-none border border-white/50 bg-transparent px-4 py-3 text-white placeholder-gray-500 focus:border-todde-red focus:ring-0 disabled:opacity-50 text-base"
              data-role="car-model"
              disabled
            >
              <option value="" class="text-black">Model*</option>
            </select>
          </div>

          <div>
            <label for="car-year" class="mb-2 block text-xs font-bold uppercase tracking-wider text-gray-400">Type</label>
            <select
              id="car-year"
              name="year"
              class="w-full rounded-none border border-white/50 bg-transparent px-4 py-3 text-white placeholder-gray-500 focus:border-todde-red focus:ring-0 disabled:opacity-50 text-base"
              data-role="car-year"
              disabled
            >
              <option value="" class="text-black">Type*</option>
            </select>
          </div>

          <button type="button" id="view-more-filtered" class="mt-4 w-full bg-todde-red px-6 py-4 text-sm font-bold uppercase tracking-wider text-white transition hover:bg-todde-red-dark">
            Get Started
          </button>
        </form>
      </div>
    </div>
  </div>
</div>

<!-- Features Section -->
<section class="bg-white py-20">
  <div class="container">
    <div class="grid gap-8 md:grid-cols-3">
      <!-- Feature 1 -->
      <div class="relative">
        <div class="flex items-center gap-4 mb-4">
          <span class="text-sm font-medium text-gray-900">01</span>
          <div class="flex-1 h-px bg-gray-900"></div>
        </div>
        <div class="border border-gray-900 p-8 text-center">
          <h3 class="mb-4 text-xl font-bold italic text-gray-900">Variety of Cars</h3>
          <p class="text-sm text-gray-600">
            At our car shop, we are committed to providing our customers with exceptional service and competitive pricing.
          </p>
        </div>
      </div>
      <!-- Feature 2 -->
      <div class="relative">
        <div class="flex items-center gap-4 mb-4">
          <span class="text-sm font-medium text-gray-900">02</span>
          <div class="flex-1 h-px bg-gray-900"></div>
        </div>
        <div class="border border-gray-900 p-8 text-center">
          <h3 class="mb-4 text-xl font-bold italic text-gray-900">Flexible Financing</h3>
          <p class="text-sm text-gray-600">
            Access transparent financing with fair interest rates and flexible payment plans tailored to your budget.
          </p>
        </div>
      </div>
      <!-- Feature 3 -->
      <div class="relative">
        <div class="flex items-center gap-4 mb-4">
          <span class="text-sm font-medium text-gray-900">03</span>
          <div class="flex-1 h-px bg-gray-900"></div>
        </div>
        <div class="border border-gray-900 p-8 text-center">
          <h3 class="mb-4 text-xl font-bold italic text-gray-900">Drive in 48 Hours</h3>
          <p class="text-sm text-gray-600">
            Get approved fast and drive home your dream car in as little as 48 hours with our streamlined process.
          </p>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Latest Vehicles Section -->
<section class="bg-white py-20" id="featured-vehicles-section">
  <div class="container">
    <!-- <p class="mb-8 text-xs font-bold uppercase tracking-widest text-gray-500">Featured</p> -->
    <h2 class="mb-12 text-4xl font-bold text-gray-900">Featured Vehicles</h2>

    <!-- Tabs -->
    <div class="mb-12 flex flex-wrap gap-8 border-b border-gray-200 pb-4" id="vehicle-tabs">
      <button class="vehicle-tab text-sm font-bold text-gray-900 border-b-2 border-todde-red pb-4 -mb-4.5" data-category="suv">Crossovers & SUVs</button>
      <button class="vehicle-tab text-sm font-bold text-gray-500 hover:text-gray-900 pb-4 -mb-4.5" data-category="sedan">Cars</button>
      <button class="vehicle-tab text-sm font-bold text-gray-500 hover:text-gray-900 pb-4 -mb-4.5" data-category="hybrid">Hybrid</button>
      <button class="vehicle-tab text-sm font-bold text-gray-500 hover:text-gray-900 pb-4 -mb-4.5" data-category="electric">Electric</button>
      <button class="vehicle-tab text-sm font-bold text-gray-500 hover:text-gray-900 pb-4 -mb-4.5" data-category="coupe">Sports Cars</button>
    </div>

    <div class="grid gap-8 sm:grid-cols-2 lg:grid-cols-4" id="vehicle-grid">
      {% for vehicle in featured_vehicles %}
      <div class="group bg-transparent vehicle-card" data-category="{{ vehicle.variant.model.body_type|default:'sedan' }}">
        <div class="mb-4 overflow-hidden bg-gray-100">
          <img src="{{ vehicle.display_image_url }}" alt="{{ vehicle.name }}" class="h-48 w-full object-cover transition duration-500 group-hover:scale-105" />
        </div>
        <h3 class="mb-1 text-lg font-bold text-gray-900">{{ vehicle.name }}</h3>
        <p class="mb-1 text-sm font-bold text-gray-900">{{ vehicle.resolved_price }}</p>
        <p class="text-xs text-gray-500">MSRP: {{ vehicle.msrp|default:"N/A" }}</p>
      </div>
      {% endfor %}
    </div>
    
    <div class="mt-12 text-center">
      <a href="{% url "marketing:all_cars" %}" class="inline-block border border-gray-900 px-8 py-3 text-sm font-semibold text-gray-900 transition hover:bg-gray-900 hover:text-white">
        Discover More
      </a>
    </div>
  </div>
</section>

<!-- Classics Section -->
<section class="bg-white py-20">
  <div class="container">
    <div class="grid gap-12 lg:grid-cols-2 lg:items-center">
      <div class="space-y-6">
        <p class="text-xs font-bold uppercase tracking-widest text-gray-500">Classics</p>
        <h2 class="text-4xl font-bold text-gray-900">Discover A New<br />Level Of Comfort</h2>
        <p class="text-gray-600">
          We are here to make the car-buying process as easy and stress-free as possible. Contact us today to schedule a test drive or to learn more about our financing and service options.
        </p>
        <a href="{% url "marketing:all_cars" %}" class="inline-block border border-gray-900 px-8 py-3 text-sm font-semibold text-gray-900 transition hover:bg-gray-900 hover:text-white">
          Discover More
        </a>
      </div>
      <div class="relative h-[400px] overflow-hidden bg-gray-100">
         <!-- Placeholder for Classics Image -->
         <img src="https://images.unsplash.com/photo-1552519507-da3b142c6e3d?auto=format&fit=crop&w=800&q=80" alt="Classic Car" class="h-full w-full object-cover" />
      </div>
    </div>
  </div>
</section>

<!-- Featured Vehicles Section -->
<section class="bg-white py-20">
  <div class="container">
    <p class="mb-8 text-xs font-bold uppercase tracking-widest text-gray-500">We Recommend</p>
    <h2 class="mb-12 text-4xl font-bold text-gray-900">Featured Vehicles</h2>

    {% if featured_vehicles %}
      {% with vehicle=featured_vehicles.0 %}
      <div class="grid border border-gray-200 bg-gray-50 lg:grid-cols-2">
        <div class="h-[400px] bg-gray-100 lg:h-auto">
          <img src="{{ vehicle.display_image_url }}" alt="{{ vehicle.name }}" class="h-full w-full object-cover" />
        </div>
        <div class="flex flex-col justify-center p-12">
          <div class="mb-4 flex items-center justify-between text-xs text-gray-500">
            <span>{{ vehicle.year|default:"2023" }} {{ vehicle.fuel_type|default:"Electric" }}</span>
            <span>Mileage: {{ vehicle.mileage|default:"0" }}</span>
          </div>
          <h3 class="mb-4 text-3xl font-bold text-gray-900">{{ vehicle.name }}</h3>
          <p class="mb-6 text-sm text-gray-600">
            With its aerodynamic curves and bold lines, this car is a standout on the road, turning heads and making a statement wherever it goes.
          </p>
          <div class="mb-8 flex items-baseline gap-2">
            <span class="text-2xl font-bold text-gray-900">{{ vehicle.resolved_price }}</span>
            {% if vehicle.msrp %}
            <span class="text-sm text-gray-500 line-through">MSRP: {{ vehicle.msrp }}</span>
            {% endif %}
          </div>
          <div>
            <a href="{% if vehicle.variant %}{% url "marketing:vehicle_detail" vehicle.variant.id %}{% else %}#{% endif %}" class="inline-block border border-gray-900 px-8 py-3 text-sm font-semibold text-gray-900 transition hover:bg-gray-900 hover:text-white">
              Explore
            </a>
          </div>
        </div>
      </div>
      {% endwith %}
    {% endif %}
  </div>
</section>

<!-- CTA Section -->
<section class="relative bg-todde-dark-bg py-24 text-white">
  <div class="absolute inset-0 z-0">
    <img src="https://images.unsplash.com/photo-1492144534655-ae79c964c9d7?auto=format&fit=crop&w=1600&q=80" alt="CTA Background" class="h-full w-full object-cover opacity-30" />
    <div class="absolute inset-0 bg-gradient-to-r from-black/80 to-transparent"></div>
  </div>
  <div class="container relative z-10">
    <div class="max-w-2xl">
      <p class="mb-4 text-xs font-bold uppercase tracking-widest text-todde-red">Flexible Financing</p>
      <h2 class="mb-6 text-4xl font-bold leading-tight">Drive Your Dream Car<br />Home Today</h2>
      <p class="mb-8 text-gray-300">
        Get approved in minutes with our flexible financing options. Low rates, easy payments, and drive away in as little as 48 hours.
      </p>
      <div class="flex max-w-lg gap-4">
        <a href="{% url 'marketing:financing' %}" class="bg-todde-red px-8 py-4 text-sm font-bold uppercase tracking-wider text-white transition hover:bg-todde-red-dark">
          Get Pre-Approved
        </a>
        <a href="{% url 'marketing:all_cars' %}" class="border border-white/50 bg-transparent px-8 py-4 text-sm font-bold uppercase tracking-wider text-white transition hover:bg-white/10">
          Browse Inventory
        </a>
      </div>
    </div>
  </div>
</section>



<!-- Testimonials Section -->
<section class="bg-white py-20 border-t border-gray-200">
  <div class="container">
    <p class="mb-8 text-xs font-bold uppercase tracking-widest text-gray-500">Testimonials</p>
    <h2 class="mb-12 text-4xl font-bold text-gray-900">What Our Clients Say</h2>

    <div class="grid gap-8 md:grid-cols-2">
      <!-- Testimonial 1 -->
      <div class="border border-gray-200 p-8 bg-gray-50">
        <p class="mb-8 text-sm text-gray-600 leading-relaxed">
          "I was impressed by the selection of vehicles at this dealership, and the sales team was incredibly helpful in helping me find the right one for my budget. They worked with me to find a financing plan that fit my needs, I never felt pressured to make a decision. I am so happy with my new car."
        </p>
        <div class="flex items-center gap-4">
          <div class="h-12 w-12 rounded-full bg-gray-700 overflow-hidden">
             <!-- Placeholder Avatar -->
             <img src="https://i.pravatar.cc/150?img=11" alt="Eduard Franz" class="h-full w-full object-cover" />
          </div>
          <span class="font-bold text-gray-900">Eduard Franz</span>
        </div>
      </div>
      <!-- Testimonial 2 -->
      <div class="border border-gray-200 p-8 bg-gray-50">
        <p class="mb-8 text-sm text-gray-600 leading-relaxed">
          "I came to this dealership looking for a specific car, and they had the exact one I was looking for. The team was helpful and friendly, and they worked with me to make sure I got the best possible deal. I appreciate their transparency and willingness to answer all my questions."
        </p>
        <div class="flex items-center gap-4">
          <div class="h-12 w-12 rounded-full bg-gray-700 overflow-hidden">
             <!-- Placeholder Avatar -->
             <img src="https://i.pravatar.cc/150?img=5" alt="Rene Wells" class="h-full w-full object-cover" />
          </div>
          <span class="font-bold text-gray-900">Rene Wells</span>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Stats Section -->
<section class="bg-white py-16 text-gray-900">
  <div class="container">
    <div class="grid gap-12 md:grid-cols-4 justify-items-center text-center">
      {% if brand_metrics %}
        {% for metric in brand_metrics %}
        <div class="flex flex-col items-center gap-2">
          <span class="text-5xl font-bold">{{ metric.value }}</span>
          <p class="text-sm text-gray-500">
            {{ metric.label }}
          </p>
        </div>
        {% endfor %}
      {% else %}
      <div class="flex flex-col items-center gap-2">
        <span class="text-5xl font-bold">15K+</span>
        <p class="text-sm text-gray-500">
          Customers empowered
        </p>
      </div>
      <div class="flex flex-col items-center gap-2">
        <span class="text-5xl font-bold">300+</span>
        <p class="text-sm text-gray-500">
          Cars financed this year
        </p>
      </div>
      <div class="flex flex-col items-center gap-2">
        <span class="text-5xl font-bold">48hrs</span>
        <p class="text-sm text-gray-500">
          Average approval time
        </p>
      </div>
      <div class="flex flex-col items-center gap-2">
        <span class="text-5xl font-bold">98%</span>
        <p class="text-sm text-gray-500">
          Customer satisfaction
        </p>
      </div>
      {% endif %}
    </div>
  </div>
</section>

<!-- Footer CTA -->
<section class="relative bg-black py-24 text-white">
  <div class="absolute inset-0 z-0">
    <img src="https://images.unsplash.com/photo-1502877338535-766e1452684a?auto=format&fit=crop&w=1600&q=80" alt="Footer CTA Background" class="h-full w-full object-cover opacity-40" />
    <div class="absolute inset-0 bg-black/60"></div>
  </div>
  <div class="container relative z-10 flex flex-col items-start justify-between gap-8 md:flex-row md:items-center">
    <div class="max-w-2xl">
      <h2 class="mb-4 text-4xl font-bold italic">Ready To Own Your Dream Car?<br />Start Your Journey Today</h2>
      <p class="text-gray-300">
        Get pre-approved in minutes with flexible financing options. Low monthly payments and drive away in as little as 48 hours.
      </p>
    </div>
    <a href="{% url 'marketing:financing' %}" class="bg-todde-red px-8 py-4 text-sm font-bold uppercase tracking-wider text-white transition hover:bg-todde-red-dark">
      Get Started
    </a>
  </div>
</section>

{% endblock %}

{% block extra_js %}
  {{ block.super }}
  <script src="{% static "js/car-inventory.js" %}" defer></script>
  <script src="{% static "js/vehicle-tabs.js" %}" defer></script>
{% endblock %}
